{% load static%}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="{% static 'css/myinfo.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/nav.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'css/footer.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'css/chatbot.css' %}">
    <title>내 정보</title>
</head>

<body>
    {% include 'nav.html' %}
    <main class="flexbox-col">
        <div class="profile-top">
            <div class="profile-left">
                <form class="profile-pic-upload" method="post" action="" enctype="multipart/form-data">
                    {% csrf_token %}
                    {{ profile_form.as_p }}
                </form>
                <div class="profile-pic-wrapper">
                    <a class="profile-pic"><img src="{{ user_profile.profile_picture.url }}" alt="">
                        <input type="submit" value="프로필 업데이트">
                    </a>
                </div>
            </div>

            <div class="profile-right" style="background-color: #fff; border-radius: 5px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); padding: 20px; margin: 20px 0; height: 250px; overflow: auto;">
                <div class="profile-right-top" style="text-align: center;">
                    <h3 class="profile-name" style="font-size: 24px; color: #333;">{{ username }}</h3>
                    <br>
                    <h1 class="profile-name" style="font-size: 24px; margin-bottom: 10px; color: #333;">{{ full_name }}</h1>
                </div>
                <div class="profile-right-bottom" style="margin-top: 20px;">
                    <div class="profile-bio-wrapper" style="margin-top: 10px;">
                        <div style="margin-bottom: 10px;">
                            <span class="profile-info" style="display: inline-block; margin-right: 10px; font-size: 16px; color: #333;">{{ job }}</span>
                            <span class="profile-info" style="display: inline-block; margin-right: 10px; font-size: 16px; color: #333;">{{ tech_stack }}</span>
                        </div>
                        <div style="margin-bottom: 10px;">
                            <span class="profile-info" style="display: inline-block; margin-right: 10px; font-size: 16px; color: #333;">
                                {% if career == 0 %}
                                    신입
                                {% else %}
                                    경력: {{ career }}
                                {% endif %}
                            </span>
                            <span class="profile-info" style="display: inline-block; margin-right: 10px; font-size: 16px; color: #333;">{{ career_detail }}</span>
                        </div>
                        <p class="profile-bio" style="font-size: 16px; margin-top: 20px; color: #555;">{{ introduction }}</p>
                    </div>
                </div>
            </div>
            
            
            {% if user_id != request.user.id %}
                <button onclick="window.location.href = '{% url "hanwooplz_app:chat" 0 user_id %}'">채팅하기</button>
            {% endif %}
            {% if github_link %}
            <li><a href= "{{ github_link }}" target="_blank"><i class="fab fa-github"></i></a></li>
            {% endif %}
            {% if linkedin_link %}
            <li><a href= "{{ linkedin_link }}" target="_blank"><i class="fab fa-linkedin-in"></i></a></li>
            {% endif %}
        </div>

        <div class="profile-page flexbox-col">
            <div class="profile-page-nav flexbox">
                <div class="profile-page-block">
                    <a><i class="uil uil-chat"></i>My Posts</a>
                </div>
            </div>
            <div class="profile-page-inner">
                {% for post in posts %}
                <div class="image-wrapper flexbox">
                    {{ post.title }}
                    {{ post.content }}
                    {{ post.created_at }}
                    {% comment %} <a href="{% url 'post' post.id %}">
                        <div class="img-overlay-wrapper">
                            <div class="img-btns">
                                <p>{{ post.title }} <i class="uil uil-heart-alt"></i> &nbsp&nbsp {{ post.content }}
                                    <i class="uil uil-comment"></i>
                                </p>
                            </div>
                            <div class="img-overlay"></div>
                        </div>
                        <img src="{{ post.image.url }}" alt="">
                    </a> {% endcomment %}
                </div>
                {% endfor %}
            </div>
        </div>
    </main>
    {% include 'footer.html' %}
    {% include 'chatbot.html' %}
</body>
<script>
    let profilePicWrapper = $(".profile-pic-wrapper");
    let profilePicNote = $(".profile-pic-note");
    profilePicWrapper.on({
        mouseenter: function () {
            profilePicNote.css("top", "110%");
            profilePicNote.css("opacity", "1");
        },
        mouseleave: function () {
            profilePicNote.css("top", "105%");
            profilePicNote.css("opacity", "0");
        }
    });

    let profileHeaderWrapper = $(".profile-header-img-wrapper");
    let profileHeaderNote = $(".profile-header-note");
    profileHeaderWrapper.on({
        mouseenter: function () {
            profileHeaderNote.css("top", "110%");
            profileHeaderNote.css("opacity", "1");
        },
        mouseleave: function () {
            profileHeaderNote.css("top", "105%");
            profileHeaderNote.css("opacity", "0");
        }
    });


    for (let i = 1; i <= 12; i++) {
        $(`#img${i}`).on({
            mouseenter: function () {
                $(`#iov${i}`).css("opacity", "1");
            },
            mouseleave: function () {
                $(`#iov${i}`).css("opacity", "0");
            }
        });
    }


    $("#switch").on('click', function () {
        if ($("body").hasClass("light")) {
            $("body").removeClass("light");
            $("#switch").removeClass("switched");
            $("#switch a").html('<i class="uil uil-sunset"></i> Light Mode');
        }
        else {
            $("body").addClass("light");
            $(".switch").addClass("switched");
            $("#switch a").html('<i class="uil uil-moonset"></i> Dark Mode');
        }
    });
</script>

</html>